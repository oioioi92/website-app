# Live Chat 正不正常？3 步自检

按下面做一遍，就能知道 Live Chat 是不是正常。

---

## 第 1 步：看两个终端有没有在跑

- **终端 A**（项目根目录 `Website-new`）：里面是不是在跑 `npm run dev`，最后一行类似 `Ready in ...`？  
  → **是** = 主站开着  
  → **否** = 先在这个目录执行 `npm run dev`，不要关

- **终端 B**（文件夹 `services\chat-server`）：里面是不是在跑 `npm run dev`，能看到 `SERVER_OK port=4000`、`DB_OK`、`WS_OK`？  
  → **是** = chat-server 开着  
  → **否** = 先进入 `services\chat-server`，执行 `npm run dev`，不要关

**如果两个终端都在跑** → 继续第 2 步。  
**如果有一个没在跑** → 先把它跑起来，再继续。

---

## 第 2 步：试前台（访客）

1. 浏览器打开：**http://localhost:3000/**
2. 看页面**右下角**有没有一个 **Live** 或聊天的小按钮，点一下。
3. 看聊天窗口里：
   - 显示 **Online** 或「客服已连接」，能打字、能发消息 → **前台正常**
   - 一直 **Offline** 或「连接中」转不停、发不了消息 → **不正常**（多半是 chat-server 没开或端口被占）

---

## 第 3 步：试后台（客服）

1. 浏览器打开：**http://localhost:3000/admin/login**，用管理员账号登录。
2. 登录后，左侧菜单点 **Live Chat**（或直接打开 **http://localhost:3000/admin/chat**）。
3. 看页面：
   - **没有**黄色提示「Live Chat 服务未连接」，左侧有「会话列表」或「暂无会话」 → **后台正常**
   - **有**黄色「Live Chat 服务未连接」 → **不正常**（主站连不上 chat-server，检查 chat-server 是否在跑、根目录 `.env` 里有没有 `CHAT_SERVER_INTERNAL_URL=http://127.0.0.1:4000`）

---

## 结论（正不正常）

- **第 1 步两个都在跑 + 第 2 步前台 Online 能发消息 + 第 3 步后台没有「服务未连接」**  
  → **正常**：Live Chat 已经在正常运行。

- **有任意一步不对**  
  → **不正常**：按上面每一步里「否」或「不正常」后面的提示去查（先保证两个终端都在跑，再试前台、后台）。

---

## 一句话

**两个终端都在跑、前台能 Online 聊天、后台没有「服务未连接」 = 正常。**
